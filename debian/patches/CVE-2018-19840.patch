Backported of:

From 667377551faf7d72437de0805bcc3761fa494a54 Mon Sep 17 00:00:00 2001
From: David Bryant <david@wavpack.com>
Date: Sun, 18 Nov 2018 17:21:17 -0800
Subject: [PATCH] issue #48: remove 'register' keyword because it doesn't
 actually do anything and troubles C++17

and

From 070ef6f138956d9ea9612e69586152339dbefe51 Mon Sep 17 00:00:00 2001
From: David Bryant <david@wavpack.com>
Date: Thu, 29 Nov 2018 21:00:42 -0800
Subject: [PATCH] issue #53: error out on zero sample rate
diff --git a/src/pack_utils.c b/src/pack_utils.c
index 5b5df93..b65dbc8 100644
--- a/src/pack_utils.c
+++ b/src/pack_utils.c
@@ -106,6 +106,11 @@ int WavpackSetConfiguration (WavpackContext *wpc, WavpackConfig *config, uint32_
     int num_chans = config->num_channels;
     int i;
 
+    if (!config->sample_rate) {
+        strcpy (wpc->error_message, "sample rate cannot be zero!");
+        return FALSE;
+    }
+
     wpc->total_samples = total_samples;
     wpc->config.sample_rate = config->sample_rate;
     wpc->config.num_channels = config->num_channels;
diff --git a/src/read_words.c b/src/read_words.c
index d80dc92..870eadc 100644
--- a/src/read_words.c
+++ b/src/read_words.c
@@ -66,7 +66,7 @@ static uint32_t __inline read_code (Bitstream *bs, uint32_t maxcode);
 
 int32_t FASTCALL get_word (WavpackStream *wps, int chan, int32_t *correction)
 {
-    register struct entropy_data *c = wps->w.c + chan;
+    struct entropy_data *c = wps->w.c + chan;
     uint32_t ones_count, low, mid, high;
     int32_t value;
     int sign;
